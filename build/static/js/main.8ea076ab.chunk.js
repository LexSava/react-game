(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{17:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(10),a=n.n(r),i=(n(17),n(4)),o=n(2),l=n(11),u=n.n(l),j=n(3),b=n.n(j),d=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(c.useEffect)((function(){return window.addEventListener(e,t,n),function(){window.removeEventListener(e,t)}}))},O=function(e,t){var n=Object(c.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return console.log(c),t}})),s=Object(o.a)(n,2),r=s[0],a=s[1];return[r,function(t){try{var n=t instanceof Function?t(r):t;a(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(c){console.log(c)}}]},h=function(e){for(var t=!1;!t;){var n=Math.floor(4*Math.random()),c=Math.floor(4*Math.random());0===e[n][c]&&(e[n][c]=2,t=!0)}},v=function(e,t,n){var c=b()(e);h(c),h(c),t(c),n(!1)},g=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!1,c=0;c<e.length&&!(n=e[c].some((function(e){return e===t})));c++);return n},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.2,t=new Audio("./audios/block_movement.mp3");return t.volume=e,t.play()},x=function(){document.onkeydown=function(e){var t=(e=e||window.event).keyCode;if(t>=37&&t<=40)return!1}},y=function(e){switch(e){case 2:return"#EBDCD0";case 4:return"#E9DBBA";case 8:return"#E9A067";case 16:return"#F08151";case 32:return"#F2654F";case 64:return"#F1462C";case 128:return"#E7C65E";case 256:return"#E8C350";case 512:return"#E8BE40";case 1024:return"#E8BB31";case 2048:return"#E7B723";default:return"#C2B3A3"}},p=n(0),_=function(e){var t=e.num;return Object(p.jsx)("div",{className:t>=2?"block_style new":"block_style",style:{background:y(t),color:2===t||4===t?"#645B52":"#F7F4EF"},children:0!==t?t:""})},N=function(){return Object(p.jsx)("div",{style:{width:"inherit"},children:Object(p.jsxs)("p",{className:"game-explanation unselectable",children:[Object(p.jsx)("strong",{className:"important unselectable",children:"How to play:"})," Use your"," ",Object(p.jsx)("strong",{children:"arrow keys"})," to move the tiles. When two tiles with the same number touch, they ",Object(p.jsx)("strong",{children:"merge into one!"})]})})},S=function(e){var t=e.reset;return Object(p.jsx)("div",{className:"game_over_overlay",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"game_over_overlay_message",children:"Game Over"}),Object(p.jsx)("div",{children:Object(p.jsx)("div",{children:Object(p.jsx)("div",{onClick:t,className:"try_again_button",children:"Try Again"})})})]})})},w=function(e){var t=e.score,n=e.best;return Object(p.jsxs)("div",{className:"score_block",children:[Object(p.jsxs)("div",{className:"score_block_element",children:[Object(p.jsx)("span",{className:"score_block_element_head",children:"score"}),Object(p.jsx)("span",{children:t})]}),Object(p.jsxs)("div",{className:"score_block_element",children:[Object(p.jsx)("span",{className:"score_block_element_head",children:"best"}),Object(p.jsx)("span",{children:n})]})]})},k=function(e){var t=e.reset,n=e.score,c=e.best;return Object(p.jsxs)("div",{className:"head",children:[Object(p.jsx)("div",{className:"logo",children:"2048"}),Object(p.jsxs)("div",{children:[" ",Object(p.jsx)(w,{score:n,best:c}),Object(p.jsx)("div",{className:"new_game_button_block",children:Object(p.jsx)("div",{onClick:t,className:"new_game_button",children:"NEW GAME"})})]})]})},C=n(7),E=n(12),J=Object(c.memo)((function(e){e.classes,e.label;var t=e.onChange,n=e.value,s=Object(E.a)(e,["classes","label","onChange","value"]),r=Object(c.useState)(0),a=Object(o.a)(r,2),i=a[0],l=a[1],u=Object(c.useState)(null),j=Object(o.a)(u,2),b=j[0],d=j[1];Object(c.useEffect)((function(){l(n)}),[n]);return Object(c.useEffect)((function(){"up"===b&&t(i)}),[b]),Object(p.jsxs)("div",{children:[Object(p.jsxs)("h3",{className:"range_slider_head",children:["Music volume: ",i]}),Object(p.jsx)("input",Object(C.a)(Object(C.a)({type:"range",value:i},s),{},{id:"myRange",onChange:function(e){l(e.target.value)},onMouseDown:function(){return d("down")},onMouseUp:function(){return d("up")}}))]})})),B=n(5),M=function(e){var t=e.onChildClick,n=Object(c.useState)(new Audio("./audios/background_melody.mp3")),s=Object(o.a)(n,1)[0],r=O("parentVal",2),a=Object(o.a)(r,2),i=a[0],l=a[1],u=Object(c.useState)(!1),j=Object(o.a)(u,2),b=j[0],d=j[1];s.volume=i/10;var f=function(e){l(e)};function h(e){t(e)}Object(c.useEffect)((function(){b?s.play():s.pause()}),[b]),Object(c.useEffect)((function(){return s.addEventListener("ended",(function(){return d(!1)})),function(){s.removeEventListener("ended",(function(){return d(!1)}))}}),[]);var v=Object(c.useCallback)((function(e){console.log("NEW VALUE",e),l(e)})),g=Object(c.useMemo)((function(){return{min:0,max:10,value:i,step:1,onChange:function(e){return v(e)}}}),[i]);return Object(p.jsxs)("div",{className:"range_slider",children:[Object(p.jsx)(J,Object(C.a)({},g)),Object(p.jsx)("button",{onClick:function(){return d(!b)},className:"range_slider_button",children:b?"Pause":"Play"}),Object(p.jsxs)("button",{value:"0",onClick:function(){f(0),h(0)},className:"range_slider_button",children:[" ",Object(p.jsx)(B.c,{style:{fontSize:"20"}})]}),Object(p.jsxs)("button",{value:"0",onClick:function(){f(2),h(.2)},className:"range_slider_button",children:[" ",Object(p.jsx)(B.d,{style:{fontSize:"20"}})]})]})},F=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{className:"range_slider_head unselectable",children:"Board size"}),[{label:"4 x 4",value:4},{label:"5 x 5",value:5},{label:"6 x 6",value:6}].map((function(e){return Object(p.jsxs)("button",{value:e.value,className:"new_game_button margin_btn_BoardSize",children:[e.label," "]},e.value)}))]})},A=function(){},L=function(e){var t=e.onClickUndo,n=e.disableUndo,c=e.onClickReplay,s=e.disableReplay;return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(p.jsxs)("div",{style:{textAlign:"center"},children:[Object(p.jsx)("h3",{className:"range_slider_head unselectable",children:"One turn back"}),Object(p.jsx)("div",{className:"new_game_button margin_btn_BoardSize",onClick:n?A:t,children:Object(p.jsx)(B.b,{})})]}),Object(p.jsxs)("div",{style:{textAlign:"center"},children:[Object(p.jsx)("h3",{className:"range_slider_head unselectable",children:"History of moves"}),Object(p.jsx)("div",{className:"new_game_button margin_btn_BoardSize",onClick:s?A:c,children:Object(p.jsx)(B.a,{})})]})]})})},U=function(){return Object(p.jsxs)("footer",{className:"footer",children:[Object(p.jsx)("p",{className:"game-explanation unselectable",children:Object(p.jsxs)("strong",{className:"important unselectable",children:[" Created by ",Object(p.jsx)("a",{href:"https://github.com/LexSava",target:"_blank",children:"Lex Sava. "})," 2021 "]})}),Object(p.jsx)("div",{style:{width:50},children:Object(p.jsx)("a",{href:"https://rs.school/js/",target:"_blank",children:Object(p.jsx)("img",{src:"./img/rs_school_js.svg"})})})]})};n(25);var z=function(){var e=O("data",d),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),a=Object(o.a)(r,2),l=a[0],j=a[1],y=O("score",0),w=Object(o.a)(y,2),C=w[0],E=w[1],J=O("best",0),B=Object(o.a)(J,2),A=B[0],z=B[1],D=O("scoreHistory",[]),R=Object(o.a)(D,2),H=R[0],I=R[1],P=O("newGame",!0),T=Object(o.a)(P,2),W=T[0],G=T[1],V=O("isWon",!1),Y=Object(o.a)(V,2),q=Y[0],K=Y[1],Q=O("moveHistory",[]),X=Object(o.a)(Q,2),Z=X[0],$=X[1],ee=O("undoMoves",[]),te=Object(o.a)(ee,2),ne=te[0],ce=te[1],se=O("replayStatus",!1),re=Object(o.a)(se,2),ae=re[0],ie=re[1],oe=Object(c.useState)(.2),le=Object(o.a)(oe,2),ue=le[0],je=le[1],be=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n,c=b()(n);if(!ae){ne.length&&ce([]);for(var r=0;r<4;r++)for(var a=c[r],o=0,l=1;o<4;)4!==l?0===a[o]&&0===a[l]?l++:0===a[o]&&0!==a[l]?(a[o]=a[l],a[l]=0,l++):0!==a[o]&&0===a[l]?l++:0!==a[o]&&0!==a[l]&&(a[o]===a[l]?(a[o]=a[o]+a[l],E(C+a[o]),a[l]=0,l=o+1,o++):l=++o+1):(l=o+1,o++);if(JSON.stringify(t)!==JSON.stringify(c)?($([].concat(Object(i.a)(Z),[t])),g(c,2048)?(K(!0),s(c)):h(c)):!g(t)&&e&&he()&&j(!0),!e)return c;s(c)}},de=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n,c=b()(n);if(!ae){ne.length&&ce([]);for(var r=3;r>=0;r--)for(var a=c[r],o=a.length-1,l=o-1;o>0;)-1!==l?0===a[o]&&0===a[l]?l--:0===a[o]&&0!==a[l]?(a[o]=a[l],a[l]=0,l--):0!==a[o]&&0===a[l]?l--:0!==a[o]&&0!==a[l]&&(a[o]===a[l]?(a[o]=a[o]+a[l],E(C+a[o]),a[l]=0,l=o-1,o--):l=--o-1):(l=o-1,o--);if(JSON.stringify(c)!==JSON.stringify(t)?($([].concat(Object(i.a)(Z),[t])),g(c,2048)?(K(!0),s(c)):h(c)):!g(t)&&e&&he()&&j(!0),!e)return c;s(c)}},fe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=b()(n),c=JSON.parse(JSON.stringify(n));if(!ae){ne.length&&ce([]);for(var r=3;r>=0;r--)for(var a=t.length-1,o=a-1;a>0;)-1!==o?0===t[a][r]&&0===t[o][r]?o--:0===t[a][r]&&0!==t[o][r]?(t[a][r]=t[o][r],t[o][r]=0,o--):0!==t[a][r]&&0===t[o][r]?o--:0!==t[a][r]&&0!==t[o][r]&&(t[a][r]===t[o][r]?(t[a][r]=t[a][r]+t[o][r],E(C+t[a][r]),t[o][r]=0,o=a-1,a--):o=--a-1):(o=a-1,a--);if(JSON.stringify(t)!==JSON.stringify(c)?($([].concat(Object(i.a)(Z),[c])),g(t,2048)?(K(!0),s(t)):h(t)):!g(c)&&e&&he()&&j(!0),!e)return t;s(t)}},Oe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=b()(n),c=JSON.parse(JSON.stringify(n));if(!ae){ne.length&&ce([]);for(var r=0;r<4;r++)for(var a=0,o=1;a<4;)4!==o?0===t[a][r]&&0===t[o][r]?o++:0===t[a][r]&&0!==t[o][r]?(t[a][r]=t[o][r],t[o][r]=0,o++):0!==t[a][r]&&0===t[o][r]?o++:0!==t[a][r]&&0!==t[o][r]&&(t[a][r]===t[o][r]?(t[a][r]=t[a][r]+t[o][r],E(C+t[a][r]),t[o][r]=0,o=a+1,a++):o=++a+1):(o=a+1,a++);if(JSON.stringify(c)!==JSON.stringify(t)?($([].concat(Object(i.a)(Z),[c])),g(t,2048)?(K(!0),s(t)):h(t)):!g(c)&&e&&he()&&j(!0),!e)return t;s(t)}},he=function(){return JSON.stringify(n)===JSON.stringify(be(!1))&&(JSON.stringify(n)===JSON.stringify(de(!1))&&(JSON.stringify(n)===JSON.stringify(Oe(!1))&&JSON.stringify(n)===JSON.stringify(fe(!1))))},ve=function(){j(!1);var e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];I([].concat(Object(i.a)(H),[C])),h(e),h(e),s(e),ie(!1),E(0),K(!1),$([]),ce([])};return Object(c.useEffect)((function(){W&&v(n,s,G)}),[W]),Object(c.useEffect)((function(){z(Math.max.apply(Math,Object(i.a)(H).concat([C])))}),[C]),f("keydown",(function(e){if(!l)switch(e.keyCode){case 38:Oe(),m(ue);break;case 40:fe(),m(ue);break;case 37:be(),m(ue);break;case 39:de(),m(ue)}})),x(),Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)(k,{score:C,reset:ve,best:A}),Object(p.jsxs)("div",{className:"playing_aield",children:[l&&Object(p.jsx)(S,{reset:ve}),Object(p.jsx)(u.a,{onSwipeDown:function(){return fe()},onSwipeLeft:function(){return be()},onSwipeRight:function(){return de()},onSwipeUp:function(){return Oe()},style:{overflowY:"hidden"},children:n.map((function(e,t){return Object(p.jsx)("div",{style:{display:"flex"},children:e.map((function(e,t){return Object(p.jsx)(_,{num:e},t)}))},t)}))})]}),Object(p.jsx)(N,{}),Object(p.jsx)(M,{onChildClick:function(e){je(e)}}),Object(p.jsx)(L,{onClickUndo:function(){var e=b()(Z),t=e.pop();$(e),ce([].concat(Object(i.a)(ne),[n])),s(t)},disableUndo:!Z.length||ae||q,onClickReplay:function(){ie(!0);var e=b()(Z);e.push(n);for(var t=function(t){setTimeout((function(){console.log("replay in progress",t),s(e[t]),t===e.length-1&&ie(!1)}),1e3*t)},c=0;c<e.length;c++)t(c)},disableReplay:ae||!Z.length}),Object(p.jsx)(F,{}),Object(p.jsx)(U,{})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(z,{})}),document.getElementById("root")),D()}},[[26,1,2]]]);
//# sourceMappingURL=main.8ea076ab.chunk.js.map